<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>Danh Sách Gói Vay Tốt Nhất | VayNhanh24h</title>
    <meta name="robots" content="index, follow">
    <meta name="description" content="Danh sách các đơn vị cho vay tiền online uy tín, duyệt tự động 24/7. Lãi suất 0%, giải ngân về tài khoản ngay lập tức.">
    <link rel="canonical" href="https://vaynhanh24h.vn/offer.html">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        /* === BỘ CSS ĐỒNG BỘ VỚI TRANG CHỦ === */
        :root {
            --primary: #fec629;
            --primary-hover: #e5b225;
            --text-dark: #111827;
            --text-gray: #4b5563;
            --bg-light: #f9fafb;
            --white: #ffffff;
            --radius: 16px;
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-light); color: var(--text-dark); line-height: 1.6; }
        a { text-decoration: none; color: inherit; }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }

        /* HEADER (Y CHANG TRANG CHỦ) */
        .header { background: var(--white); padding: 15px 0; position: sticky; top: 0; z-index: 100; box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
        .header-inner { display: flex; justify-content: space-between; align-items: center; }
        .logo img { height: 40px; }
        .nav { display: flex; gap: 25px; }
        .nav a { font-weight: 600; font-size: 15px; color: var(--text-dark); transition: 0.3s; }
        .nav a:hover { color: #d97706; }
        .btn-header { background: var(--primary); padding: 10px 20px; border-radius: 50px; font-weight: 700; color: #000; box-shadow: 0 4px 6px rgba(254, 198, 41, 0.2); }

        /* PAGE TITLE */
        .page-header { text-align: center; padding: 40px 0 20px; }
        .page-header h1 { font-size: 32px; font-weight: 800; color: #111; margin-bottom: 10px; }
        .page-header p { color: var(--text-gray); font-size: 16px; }

        /* OFFERS GRID (STYLE MỚI ĐỒNG BỘ) */
        .offers-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 30px; padding-bottom: 50px; }
        
        .offer-card { 
            background: var(--white); border-radius: var(--radius); border: 1px solid #e5e7eb;
            overflow: hidden; transition: 0.3s; position: relative; display: flex; flex-direction: column;
        }
        .offer-card:hover { transform: translateY(-5px); box-shadow: var(--shadow); border-color: var(--primary); }
        
        /* Badge mới đẹp hơn */
        .badge { position: absolute; top: 15px; right: 15px; background: #ecfdf5; color: #059669; padding: 5px 10px; border-radius: 8px; font-size: 11px; font-weight: 700; text-transform: uppercase; }
        
        .card-header { padding: 25px 20px 10px; text-align: center; height: 80px; display: flex; align-items: center; justify-content: center; }
        .brand-logo { max-height: 45px; max-width: 140px; object-fit: contain; }
        
        .card-body { padding: 10px 25px 20px; flex: 1; }
        .brand-name { text-align: center; font-size: 18px; font-weight: 800; margin-bottom: 15px; color: #111; }
        
        .info-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px; border-bottom: 1px dashed #f3f4f6; padding-bottom: 8px; }
        .info-row:last-child { border-bottom: none; }
        .info-label { color: #6b7280; }
        .info-val { font-weight: 700; color: #111; }
        .highlight { color: #d97706; }

        .card-footer { padding: 0 25px 25px; }
        .btn-loan { 
            display: flex; justify-content: center; align-items: center; gap: 10px;
            width: 100%; padding: 14px; background: var(--primary); color: #000; 
            font-weight: 800; font-size: 15px; border-radius: 12px; 
            transition: 0.2s; text-transform: uppercase;
        }
        .btn-loan:hover { background: var(--primary-hover); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(254, 198, 41, 0.4); }
        
        /* Trạng thái đã bấm */
        .card-disabled { opacity: 0.6; filter: grayscale(100%); pointer-events: none; }
        .btn-disabled { background: #e5e7eb; color: #9ca3af; box-shadow: none; cursor: not-allowed; }

        /* SEO ARTICLE */
        .seo-box { background: #fff; padding: 40px; border-radius: 20px; border: 1px solid #e5e7eb; margin-bottom: 50px; }
        .seo-box h2 { font-size: 24px; font-weight: 800; margin-bottom: 15px; }
        .seo-box p, .seo-box li { color: var(--text-gray); font-size: 15px; margin-bottom: 10px; }

        /* FOOTER (Y CHANG TRANG CHỦ) */
        .footer { background: var(--white); border-top: 1px solid #e5e7eb; padding: 40px 0 20px; text-align: center; margin-top: auto; }
        .footer p { color: var(--text-gray); font-size: 13px; margin-bottom: 5px; }
        
        /* Helper Tool */
        #helper-box { background: #111827; color: #10b981; padding: 20px; border-radius: 8px; margin: 20px auto; max-width: 800px; display: none; font-family: monospace; }
        #helper-textarea { width: 100%; height: 150px; background: #000; color: #fff; border: 1px solid #374151; padding: 10px; }
        .test-alert { background: #fee2e2; color: #b91c1c; padding: 10px; text-align: center; font-weight: bold; font-size: 13px; border-bottom: 1px solid #fecaca; }
        .reset-btn { margin-top: 10px; font-size: 11px; color: #ef4444; cursor: pointer; text-decoration: underline; background: none; border: none; }

        @media (max-width: 768px) {
            .nav { display: none; }
            .page-header h1 { font-size: 24px; }
            .offer-card { flex-direction: row; align-items: center; padding: 10px; height: auto; }
            .card-header { width: 80px; height: 80px; padding: 5px; border-right: 1px solid #f3f4f6; }
            .brand-logo { max-height: 50px; max-width: 100%; }
            .card-body { padding: 0 15px; }
            .brand-name { text-align: left; margin-bottom: 5px; font-size: 15px; }
            .info-row { margin-bottom: 2px; font-size: 12px; border: none; padding: 0; }
            .info-row:not(:first-child) { display: none; } /* Mobile ẩn bớt dòng */
            .card-footer { padding: 0; min-width: 100px; }
            .btn-loan { padding: 10px 5px; font-size: 11px; border-radius: 8px; }
            .badge { display: none; }
        }
    </style>
</head>
<body>

    <div id="test-alert" class="test-alert" style="display:none;">
        ⚠️ CHẾ ĐỘ TEST: ĐANG BẬT (Bấm thoải mái không mất Offer)
    </div>

    <header class="header">
        <div class="container header-inner">
            <a href="index.html" class="logo">
                <img src="images/catcredit-logo.png" alt="VayNhanh24h" onerror="this.style.display='none';this.parentElement.innerText='VAYNHANH24H'">
            </a>
            <nav class="nav">
                <a href="index.html">Trang chủ</a>
                <a href="index.html#loi-ich">Lợi ích</a>
                <a href="index.html#faq">Hỏi đáp</a>
            </nav>
            <a href="index.html" class="btn-header" style="background:#f3f4f6; color:#111; box-shadow:none;"><i class="fa-solid fa-arrow-left"></i> Quay lại</a>
        </div>
    </header>

    <div class="container">
        
        <div class="page-header">
            <h1>Đề Xuất Vay Tốt Nhất</h1>
            <p>Dựa trên hồ sơ của bạn, đây là các gói vay có tỷ lệ duyệt cao nhất hôm nay.</p>
        </div>

        <div id="helper-box">
            <h3>⚠️ COPY MÃ NÀY VÀO FILE: links.json</h3>
            <textarea id="helper-textarea"></textarea>
        </div>

        <div id="offers-grid" class="offers-grid">
            <div style="text-align:center; padding:50px; grid-column:1/-1;">
                <i class="fa-solid fa-circle-notch fa-spin" style="font-size:30px; color:#fec629;"></i>
                <p style="margin-top:10px; color:#666;">Đang tìm kiếm ưu đãi...</p>
            </div>
        </div>

        <div class="seo-box">
            <h2>Lưu ý khi đăng ký vay online</h2>
            <p>Để tăng tỷ lệ duyệt hồ sơ lên đến 99%, bạn vui lòng lưu ý:</p>
            <ul>
                <li>✅ Điền chính xác thông tin cá nhân và số điện thoại chính chủ.</li>
                <li>✅ Chuẩn bị sẵn CCCD/CMND để chụp ảnh xác minh (eKYC).</li>
                <li>✅ Có thể đăng ký cùng lúc 2-3 đơn vị để nhận được khoản vay tốt nhất.</li>
                <li>✅ Thanh toán đúng hạn để nâng cao điểm tín dụng cho các lần vay sau.</li>
            </ul>
        </div>

    </div>

    <footer class="footer">
        <div class="container">
            <img src="images/catcredit-logo.png" alt="VayNhanh24h" style="height:30px; margin-bottom:15px; filter:grayscale(100%); opacity:0.7" onerror="this.style.display='none'">
            <p><strong>VayNhanh24h.vn</strong> - Giải pháp tài chính cá nhân thông minh.</p>
            <p>Địa chỉ: Tòa nhà Bitexco, Quận 1, TP.HCM | Email: hotro@vaynhanh24h.vn</p>
            
            <div id="user-ip" style="font-size:11px; color:#ccc; margin-top:10px;">Checking IP...</div>
            <button class="reset-btn" onclick="resetHistory()">[Xóa lịch sử Test]</button>
            <br>
            <a href="admin-tool.html" style="font-size:11px; color:#eee;">Admin Access</a>
        </div>
    </footer>

    <script>
        // ==========================================
        const PUB_ID = "28janns";
        const TOKEN = "hpoRHLinw3JgcQaV6g6SaQ=="; 
        
        // CHẾ ĐỘ TEST: true = KHÔNG MẤT | false = KHÁCH VAY THẬT (MẤT)
        const CHE_DO_TEST = true; 
        // ==========================================

        const API_URL = `https://publisher-api.riofintech.net/offer/all?pub_id=${PUB_ID}&token=${encodeURIComponent(TOKEN)}`;

        async function checkUserIP() {
            const ipEl = document.getElementById('user-ip');
            try {
                const res = await fetch('https://api.ipify.org?format=json');
                const data = await res.json();
                ipEl.innerText = `IP: ${data.ip}`;
            } catch (e) { ipEl.innerText = ''; }
        }

        function trackClick(brandKey) {
            if (CHE_DO_TEST) return true;
            let clickedOffers = JSON.parse(localStorage.getItem('vaynhanh24h_clicked') || '[]');
            if (!clickedOffers.includes(brandKey)) {
                clickedOffers.push(brandKey);
                localStorage.setItem('vaynhanh24h_clicked', JSON.stringify(clickedOffers));
            }
            return true; 
        }

        function resetHistory() {
            if(confirm('Xóa lịch sử click để hiện lại tất cả?')) {
                localStorage.removeItem('vaynhanh24h_clicked');
                location.reload();
            }
        }

        function getSmartInfo(name) {
            let n = name.toLowerCase();
            if(n.includes('doctor')) return { limit: '10 Triệu', rate: '0% lần đầu', time: '30 ngày' };
            if(n.includes('moneycat')) return { limit: '15 Triệu', rate: '0% phí', time: '7 - 30 ngày' };
            if(n.includes('takomo')) return { limit: '10 Triệu', rate: 'Duyệt nhanh', time: 'Linh hoạt' };
            if(n.includes('vayvnd')) return { limit: '15 Triệu', rate: '0% lãi', time: '30 ngày' };
            if(n.includes('f88') || n.includes('vietmoney')) return { limit: '50 Triệu', rate: 'Cầm đồ', time: '12 tháng' };
            if(n.includes('mafc') || n.includes('mcredit')) return { limit: '70 Triệu', rate: '1.67%', time: '36 tháng' };
            return { limit: '10 Triệu', rate: 'Ưu đãi tốt', time: 'Linh hoạt' };
        }

        function getCleanName(rawName) {
            let n = rawName.toLowerCase();
            if (n.includes('vayvnd')) return 'VayVND';
            if (n.includes('cayvang')) return 'Cây Vàng';
            if (n.includes('doctor')) return 'DoctorDong';
            if (n.includes('moneycat')) return 'MoneyCat';
            if (n.includes('tamo')) return 'Tamo';
            if (n.includes('senmo')) return 'Senmo';
            if (n.includes('robocash')) return 'Robocash';
            if (n.includes('oncredit')) return 'OnCredit';
            if (n.includes('takomo')) return 'Takomo';
            if (n.includes('kredivo')) return 'Kredivo';
            if (n.includes('jeff')) return 'Jeff App';
            if (n.includes('crezu')) return 'Crezu';
            if (n.includes('atm')) return 'ATM Online';
            if (n.includes('f88')) return 'F88';
            if (n.includes('mafc')) return 'Mirae Asset';
            return rawName.replace(/\(.*\)/g, '').replace(/(VN|CP|CPL|CPS|CPI|Android|iOS|Web|App|APK)/gi, '').trim();
        }

        function getMyLink(name, links) {
            if (!links) return null;
            for (const [key, url] of Object.entries(links)) {
                if (url && url.length > 5 && name.toLowerCase().includes(key.toLowerCase())) return url;
            }
            return null;
        }
        
        function getBrandKey(name) { return name.toLowerCase().trim().split(/[\s\-\.\(\)]+/)[0]; }

        async function init() {
            checkUserIP();
            if (CHE_DO_TEST) document.getElementById('test-alert').style.display = 'block';

            const grid = document.getElementById('offers-grid');
            const helper = document.getElementById('helper-box');
            
            try {
                const [apiRes, linkRes] = await Promise.all([
                    fetch(API_URL),
                    fetch('links.json').catch(() => null)
                ]);

                const apiData = await apiRes.json();
                let myLinks = {};

                if (linkRes && linkRes.ok) {
                    myLinks = await linkRes.json();
                } else {
                    helper.style.display = 'block';
                }

                if (apiData.status !== 1 || !apiData.data) throw new Error("No Data");

                if (helper.style.display === 'block') {
                    let txt = "{\n" + apiData.data.map((o,i) => `  "${o.name}": ""` + (i<apiData.data.length-1?",":"")).join("\n") + "\n}";
                    document.getElementById('helper-textarea').value = txt;
                }

                let clickedOffers = JSON.parse(localStorage.getItem('vaynhanh24h_clicked') || '[]');
                let uniqueMap = {};

                apiData.data.forEach(item => {
                    let brand = getBrandKey(item.name);
                    if (!CHE_DO_TEST && clickedOffers.includes(brand)) return; 

                    let link = getMyLink(item.name, myLinks);
                    let clean = getCleanName(item.name);
                    let info = getSmartInfo(item.name);
                    let hasLink = !!link;

                    if (!uniqueMap[brand] || (!uniqueMap[brand].hasLink && hasLink)) {
                        uniqueMap[brand] = { ...item, display: clean, link: link, hasLink: hasLink, info: info, brandKey: brand };
                    }
                });

                let offers = Object.values(uniqueMap).sort((a,b) => b.hasLink - a.hasLink);
                
                if (offers.length === 0) {
                    grid.innerHTML = '<div style="grid-column:1/-1;text-align:center;padding:40px;background:#fff;border-radius:12px;"><h3>Bạn đã đăng ký hết các ưu đãi!</h3><p>Vui lòng quay lại sau 24h để nhận gói vay mới.</p></div>';
                    return;
                }

                grid.innerHTML = offers.map(o => {
                    let active = o.hasLink;
                    let clsBox = active ? "offer-card" : "offer-card card-disabled";
                    let badge = active ? `<div class="badge">Đề xuất</div>` : ``;
                    let btnCls = active ? "btn-loan" : "btn-loan btn-disabled";
                    let btnTxt = active ? 'ĐĂNG KÝ VAY NGAY <i class="fa-solid fa-arrow-right"></i>' : 'TẠM DỪNG';
                    let href = active ? o.link : "javascript:void(0)";
                    let target = active ? "_blank" : "_self";
                    let onclickEvent = active ? `onclick="trackClick('${o.brandKey}')"` : "";
                    
                    let altText = `Vay tiền online nhanh ${o.display}`;

                    return `
                    <div class="${clsBox}">
                        ${badge}
                        <div class="card-header">
                            <img src="${o.avatar}" class="brand-logo" alt="${altText}" title="${altText}" onerror="this.style.display='none'">
                        </div>
                        <div class="card-body">
                            <h3 class="brand-name">${o.display}</h3>
                            <div class="info-row">
                                <span class="info-label">Hạn mức</span>
                                <span class="info-val highlight" style="font-size:16px">${o.info.limit}</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Lãi suất</span>
                                <span class="info-val">${o.info.rate}</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Thời hạn</span>
                                <span class="info-val">${o.info.time}</span>
                            </div>
                        </div>
                        <div class="card-footer">
                            <a href="${href}" target="${target}" class="${btnCls}" ${onclickEvent} rel="nofollow">
                                ${btnTxt}
                            </a>
                        </div>
                    </div>`;
                }).join('');

            } catch (e) {
                console.error(e);
                grid.innerHTML = `<p style="text-align:center;width:100%;color:red">Lỗi kết nối máy chủ.</p>`;
            }
        }

        init();
    </script>
</body>
</html>
